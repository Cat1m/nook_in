# ğŸ¯ Nook In - Professional Lint Configuration
# Based on: flutter_lints + custom strict rules

# Káº¿ thá»«a bá»™ rules chuáº©n cá»§a Flutter team (chá»©a cÃ¡c rules cÆ¡ báº£n nháº¥t)
include: package:flutter_lints/flutter.yaml

analyzer:
  # ğŸš« Loáº¡i bá» cÃ¡c file tá»± sinh (generated code) khá»i viá»‡c kiá»ƒm tra
  # LÃ½ do: Code nÃ y do mÃ¡y sinh ra, thÆ°á»ng vi pháº¡m rules nhÆ°ng ta khÃ´ng sá»­a tay Ä‘Æ°á»£c.
  exclude:
    - "**/*.g.dart"
    - "**/*.freezed.dart"
    - "**/*.config.dart"
    - "lib/gen/**"
    - "build/**"
  
  # ğŸ”’ Cháº¿ Ä‘á»™ "SiÃªu an toÃ n" (Strict Mode)
  # Báº­t pháº§n nÃ y giÃºp phÃ¡t hiá»‡n lá»—i tiá»m áº©n do kiá»ƒu dá»¯ liá»‡u khÃ´ng rÃµ rÃ ng (dynamic).
  # Team lÆ°u Ã½: Pháº£i khai bÃ¡o kiá»ƒu (int, String, Model...) rÃµ rÃ ng, háº¡n cháº¿ dÃ¹ng 'var' hoáº·c bá» trá»‘ng.
  language:
    strict-casts: true      # BÃ¡o lá»—i khi Ã©p kiá»ƒu ngáº§m Ä‘á»‹nh khÃ´ng an toÃ n
    strict-inference: true  # BÃ¡o lá»—i khi trÃ¬nh biÃªn dá»‹ch khÃ´ng Ä‘oÃ¡n Ä‘Æ°á»£c kiá»ƒu chÃ­nh xÃ¡c
    strict-raw-types: true  # BÃ¡o lá»—i khi dÃ¹ng List, Map mÃ  khÃ´ng Ä‘á»‹nh nghÄ©a kiá»ƒu <T> (VD: List thay vÃ¬ List<int>)
  
  # âš ï¸ TÃ¹y chá»‰nh má»©c Ä‘á»™ nghiÃªm trá»ng
  errors:
    # Coi nhá»¯ng lá»—i nÃ y lÃ  Error (Ä‘á» lÃ²m) Ä‘á»ƒ khÃ´ng build Ä‘Æ°á»£c app -> Báº¯t buá»™c pháº£i sá»­a
    missing_required_param: error    # Thiáº¿u tham sá»‘ required
    missing_return: error            # HÃ m cÃ³ kiá»ƒu tráº£ vá» nhÆ°ng quÃªn return
    must_be_immutable: error         # Widget trong Flutter pháº£i lÃ  báº¥t biáº¿n (final fields)
    invalid_annotation_target: error # DÃ¹ng sai annotation (hay gáº·p vá»›i Freezed/JsonSerializable)
    
    # Coi nhá»¯ng lá»—i nÃ y lÃ  Warning (vÃ ng)
    todo: warning             # Nháº¯c nhá»Ÿ cÃ¡c task TODO cÃ²n sÃ³t láº¡i
    deprecated_member_use: warning # Cáº£nh bÃ¡o khi dÃ¹ng hÃ m cÅ© sáº¯p bá»‹ xÃ³a

  plugins:
    - custom_lint

linter:
  rules:
    # ================== ğŸ›¡ï¸ Error Prevention (NgÄƒn cháº·n lá»—i logic/runtime) ==================
    - always_use_package_imports # DÃ¹ng 'package:...' thay vÃ¬ relative path '../' Ä‘á»ƒ trÃ¡nh import trÃ¹ng láº·p class
    - avoid_dynamic_calls        # TrÃ¡nh gá»i hÃ m trÃªn biáº¿n dynamic (nguyÃªn nhÃ¢n hÃ ng Ä‘áº§u gÃ¢y crash app)
    - avoid_empty_else           # KhÃ´ng viáº¿t khá»‘i else rá»—ng
    - avoid_print                # âŒ KhÃ´ng dÃ¹ng print() vÃ¬ nÃ³ spam log há»‡ thá»‘ng. HÃ£y dÃ¹ng log/debugPrint
    - cancel_subscriptions       # âš ï¸ Báº¯t buá»™c há»§y StreamSubscription Ä‘á»ƒ trÃ¡nh rÃ² rá»‰ bá»™ nhá»› (Memory Leak)
    - close_sinks                # Báº¯t buá»™c Ä‘Ã³ng Sink/StreamController khi khÃ´ng dÃ¹ng
    - control_flow_in_finally    # KhÃ´ng dÃ¹ng break/continue trong khá»‘i finally (gÃ¢y khÃ³ hiá»ƒu luá»“ng cháº¡y)
    - empty_statements           # TrÃ¡nh cÃ¡c dáº¥u cháº¥m pháº©y ; thá»«a
    - hash_and_equals            # Pháº£i override cáº£ hashcode vÃ  equals cÃ¹ng lÃºc
    - no_duplicate_case_values   # TrÃ¡nh case trÃ¹ng nhau trong switch
    - no_logic_in_create_state   # State cá»§a StatefulWidget khÃ´ng Ä‘Æ°á»£c chá»©a logic phá»©c táº¡p khi khá»Ÿi táº¡o
    - prefer_void_to_null        # DÃ¹ng void thay vÃ¬ null cho Future khÃ´ng tráº£ vá» giÃ¡ trá»‹
    - throw_in_finally           # KhÃ´ng nÃ©m lá»—i trong khá»‘i finally
    - unnecessary_statements     # Code vÃ´ nghÄ©a, khÃ´ng cÃ³ tÃ¡c dá»¥ng
    - unrelated_type_equality_checks # So sÃ¡nh 2 kiá»ƒu khÃ´ng liÃªn quan (VD: so sÃ¡nh int == String -> luÃ´n false)
    - unsafe_html                # TrÃ¡nh dÃ¹ng HTML api khÃ´ng an toÃ n trÃªn web
    - valid_regexps              # Kiá»ƒm tra cÃº phÃ¡p Regex ngay lÃºc code
    
    # ================== ğŸ¨ Style & Consistency (Code Ä‘áº¹p & Äá»“ng bá»™) ==================
    
    # --- ğŸ“ Khai bÃ¡o & CÃº phÃ¡p ---
    - always_declare_return_types # Báº¯t buá»™c khai bÃ¡o kiá»ƒu tráº£ vá» cho hÃ m (void, Widget, int...). GiÃºp code dá»… Ä‘á»c.
    - always_put_required_named_parameters_first # ÄÆ°a tham sá»‘ required lÃªn Ä‘áº§u
    - annotate_overrides          # LuÃ´n thÃªm @override khi ghi Ä‘Ã¨ hÃ m
    - avoid_init_to_null          # KhÃ´ng cáº§n gÃ¡n = null (VD: String? a = null; -> thá»«a, vÃ¬ máº·c Ä‘á»‹nh lÃ  null rá»“i)
    - avoid_redundant_argument_values # KhÃ´ng truyá»n giÃ¡ trá»‹ máº·c Ä‘á»‹nh náº¿u khÃ´ng cáº§n thiáº¿t
    - avoid_shadowing_type_parameters # TrÃ¡nh Ä‘áº·t tÃªn generic <T> trÃ¹ng nhau gÃ¢y nháº§m láº«n
    - camel_case_types            # TÃªn Class viáº¿t HoaChá»¯CÃ¡iÄáº§u
    - constant_identifier_names   # Háº±ng sá»‘ (const) viáº¿t HOA_CACH_NHAU
    - curly_braces_in_flow_control_structures # LuÃ´n dÃ¹ng {} cho if/else/for
    - file_names                  # TÃªn file viáº¿t thuong_cach_duoi_nhu_nay.dart
    - library_private_types_in_public_api # KhÃ´ng tráº£ vá» class private (_Private) trong hÃ m public
    - non_constant_identifier_names # TÃªn biáº¿n viáº¿t camelCase
    - omit_local_variable_types   # (TÃ¹y chá»n) KhÃ´ng cáº§n ghi kiá»ƒu cho biáº¿n cá»¥c bá»™ náº¿u compiler tá»± hiá»ƒu (var a = 10)
    - prefer_final_fields         # Biáº¿n trong class náº¿u khÃ´ng Ä‘á»•i thÃ¬ nÃªn Ä‘á»ƒ final
    - prefer_final_locals         # Biáº¿n cá»¥c bá»™ náº¿u khÃ´ng Ä‘á»•i thÃ¬ nÃªn Ä‘á»ƒ final (giÃºp code an toÃ n hÆ¡n)
    - prefer_is_empty             # DÃ¹ng .isEmpty thay vÃ¬ .length == 0 (nhanh hÆ¡n vÃ  dá»… Ä‘á»c hÆ¡n)
    - prefer_is_not_empty         # DÃ¹ng .isNotEmpty thay vÃ¬ .length > 0
    - prefer_single_quotes        # DÃ¹ng dáº¥u nhÃ¡y Ä‘Æ¡n 'text' thay vÃ¬ nhÃ¡y kÃ©p "text" (trá»« khi chuá»—i cÃ³ chá»©a nhÃ¡y Ä‘Æ¡n)
    
    # --- ğŸš€ Flutter Specific (Tá»‘i Æ°u cho Flutter) ---
    - avoid_unnecessary_containers # Äá»«ng bá»c Container náº¿u chá»‰ Ä‘á»ƒ padding/margin (dÃ¹ng Padding/SizedBox ráº» hÆ¡n)
    - await_only_futures          # Chá»‰ await nhá»¯ng gÃ¬ lÃ  Future
    - prefer_const_constructors   # ğŸ”¥ Cá»°C QUAN TRá»ŒNG: DÃ¹ng const báº¥t cá»© khi nÃ o cÃ³ thá»ƒ. GiÃºp Flutter khÃ´ng pháº£i váº½ láº¡i Widget Ä‘Ã³ -> TÄƒng FPS.
    - prefer_const_constructors_in_immutables
    - prefer_const_literals_to_create_immutables
    - require_trailing_commas     # ğŸ”¥ QUAN TRá»ŒNG: LuÃ´n Ä‘á»ƒ dáº¥u pháº©y cuá»‘i cÃ¹ng trong danh sÃ¡ch tham sá»‘. GiÃºp Ctrl+S format code xuá»‘ng dÃ²ng Ä‘áº¹p hÆ¡n.
    - sized_box_for_whitespace    # DÃ¹ng SizedBox thay vÃ¬ Container khi chá»‰ cáº§n táº¡o khoáº£ng tráº¯ng (hiá»‡u nÄƒng cao hÆ¡n)
    - sort_child_properties_last  # Thuá»™c tÃ­nh 'child' hoáº·c 'children' nÃªn Ä‘á»ƒ cuá»‘i cÃ¹ng trong Widget (dá»… nhÃ¬n cáº¥u trÃºc cÃ¢y)
    - unawaited_futures           # âš ï¸ Cáº£nh bÃ¡o náº¿u gá»i hÃ m async mÃ  quÃªn await (hoáº·c unawaited). TrÃ¡nh lá»—i logic cháº¡y sai thá»© tá»±.
    - use_build_context_synchronously # âš ï¸ Cáº£nh bÃ¡o dÃ¹ng BuildContext sau khi await (dá»… gÃ¢y crash náº¿u mÃ n hÃ¬nh Ä‘Ã£ Ä‘Ã³ng). Cáº§n check mounted.
    - use_key_in_widget_constructors # LuÃ´n khai bÃ¡o Key cho Widget (cáº§n thiáº¿t cho test vÃ  performance)

    # ================== Disabled Rules (ÄÃ£ táº¯t bá»›t cho Ä‘á»¡ gáº¯t) ==================
    # - lines_longer_than_80_chars  # Táº¯t vÃ¬ mÃ n hÃ¬nh giá» rá»™ng, giá»›i háº¡n 80 kÃ½ tá»± hÆ¡i tÃ¹ tÃºng
    # - prefer_double_quotes        # Táº¯t vÃ¬ team thá»‘ng nháº¥t dÃ¹ng single quote